/**
 * Created by zouwei on 2016/3/7.
 */
function alertFuc(content) {
    $("#map_alert_div").html(content);

    if ($("#map_alert_div").css("display") == "none") {
        $("#map_alert_div").css("display", "block");
        var tickcount = 0;
        var int = self.setInterval(function () {
            tickcount++;
            var left = 45 + tickcount;
            $("#map_alert_div").css("left", left + "%");
            if (left >= 55) {
                clearInterval(int);
                $("#map_alert_div").css("display", "none");
            }
        }, 100);
    }
}
/**
 * @author:wangkun
 * @date:2017-06-21
 * @return:
 * @description:画进度
 */
function drawProcess(width) {
    $('canvas.process').each(function () {
        var text = $(this).text();
        var process = text.substring(0, text.length - 1);
        var canvas = this;
        var context = canvas.getContext('2d');
        context.clearRect(0, 0, width, width);

        context.beginPath();
        context.moveTo(width / 2, width / 2);
        context.arc(width / 2, width / 2, width / 2, 0, Math.PI * 2, false);
        context.closePath();
        context.fillStyle = '#ddd';
        context.fill();

        context.beginPath();
        context.moveTo(width / 2, width / 2);
        context.arc(width / 2, width / 2, width / 2, 0, Math.PI * 2 * process / width, false);
        context.closePath();
        if (process < 60) {
            context.fillStyle = 'red';
        }
        else if (process < 80) {
            context.fillStyle = 'yellow';
        }
        else {
            context.fillStyle = '#2a2';
        }
        context.fill();

        context.beginPath();
        context.moveTo(width / 2, width / 2);
        context.arc(width / 2, width / 2, width / 2 - 10, 0, Math.PI * 2, true);
        context.closePath();
        context.fillStyle = 'rgba(255,255,255,1)';
        context.fill();

        context.beginPath();
        context.arc(width / 2, width / 2, width / 2 - 20, 0, Math.PI * 2, true);
        context.closePath();
        context.strokeStyle = '#ddd';
        context.stroke();
        context.font = "bold 9pt Arial";
        context.fillStyle = '#2a2';
        context.textAlign = 'center';
        context.textBaseline = 'middle';
        context.moveTo(width / 2, width / 2);
        context.fillText(text, width / 2, width / 2);
    });
}
function AJAX(url, paramdata, errorCallback, successCallback) {
    $.ajax({
        type: 'post',
        url: url,
        async: true,
        data: {
            'para': paramdata
        },
        dataType: 'json',
        error: function (data) {
            $.isFunction(errorCallback) && errorCallback.call(data);
        },
        success: function (data) {
            $.isFunction(successCallback) && successCallback.call(null, data);
        }
    });
}
function stopDragMap() {
    var map = GDYB.Page.curPage.map;
    for (var i = 0; i < map.events.listeners.mousemove.length; i++) {
        var handler = map.events.listeners.mousemove[i];
        if (handler.obj.CLASS_NAME == "WeatherMap.Handler.Drag") {
            handler.obj.active = false;
        }
    }
}
function startDragMap() {
    var map = GDYB.Page.curPage.map;
    for (var i = 0; i < map.events.listeners.mousemove.length; i++) {
        var handler = map.events.listeners.mousemove[i];
        if (handler.obj.CLASS_NAME == "WeatherMap.Handler.Drag") {
            handler.obj.active = true;
        }
    }
}