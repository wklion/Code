<!DOCTYPE html>
<html>
    <head>
        <META http-equiv="Content-Type" content="text/html;">
        <META http-equiv="Content-Type" content="application/pdf;">
        <title>甘肃省模式数据检验评估系统</title>
        <link rel="stylesheet" href="css/zui.min.css"/>
        <link rel="stylesheet" href="css/bootstrap.css" rel="stylesheet">
        <link rel="stylesheet" href="css/common.css"/>
        <link rel="stylesheet" href="css/datetimepicker.min.css"/>
        <link rel="stylesheet" href="css/buttons.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <link rel="stylesheet" href="css/produce.css">
        <link rel="stylesheet" href="css/extended.min.css">
		<link rel="stylesheet" href="assets/layui/css/layui.css">
        <link rel="stylesheet" href="assets/layer/skin/default/layer.css">
        <link rel="stylesheet" href="assets/ztree/css/zTreeStyle/zTreeStyle.css">
        <link rel="stylesheet" href="assets/handsontable/css/handsontable.full.min.css" />
        <meta http-equiv="Access-Control-Allow-Origin" content="*">
        <script type="text/javascript" src="js/jquery.min.js"></script>
		<script type="text/javascript" src="js/jquery.imgpreload.min.js"></script>
        <script type="text/javascript" src="js/buttons.js"></script>
        <script type="text/javascript" src='libs/WeatherMap.Include.js'></script>
        <script type="text/javascript" src="js/jquery.cookie.js"></script>
        <script type="text/javascript" src="js/zui.min.js"></script>
        <script type="text/javascript" src="js/bootstrap-modal.js"></script>
        <script type="text/javascript" src="js/bootstrap.js"></script>
        <script type="text/javascript" src="js/components/Audio.ctl.js"></script>
        <script type="text/javascript" src="assets/layer/layer.js"></script>
        <script type="text/javascript" src="assets/layui/layui.js"></script>
        <script type="text/javascript" src="assets/ztree/js/jquery.ztree.all.min.js"></script>
        <script type="text/javascript" src="assets/moment/moment.min.js"></script>
        <script type="text/javascript" src="assets/moment/zh-cn.js"></script>
        <script type="text/javascript" src="assets/handsontable/js/handsontable.full.min.js"></script>
        <script type="text/javascript" src="assets/handsontable/js/handsontable.addon.js"></script>
        <script type="text/javascript" src="js/highcharts/highcharts.js"></script>
        <script type="text/javascript" src="js/highcharts/highcharts-zh_CN.js"></script>
        <script type="text/javascript" src="js/highcharts/exporting.js"></script>
        <script type="text/javascript" src="js/styles/plotStyles_surface.js"></script>
        <script type="text/javascript" src="js/styles/plotStyles_hight.js"></script>
        <script type="text/javascript" src="js/styles/plotStyles_rhjc.js"></script>
        <script type="text/javascript" src="js/styles/plotStyles_zhjc.js"></script>
        <script type="text/javascript" src="js/styles/rain1hStyles.js"></script>
        <script type="text/javascript" src="js/styles/rain3hStyles.js"></script>
        <script type="text/javascript" src="js/styles/rain6hStyles.js"></script>
        <script type="text/javascript" src="js/styles/rain12hStyles.js"></script>
        <script type="text/javascript" src="js/styles/rain24hStyles.js"></script>
        <script type="text/javascript" src="js/styles/windStyles.js"></script>
        <script type="text/javascript" src="js/styles/tempStyles.js"></script>
        <script type="text/javascript" src="js/styles/rhStyles.js"></script>
        <script type="text/javascript" src="js/styles/tccStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_TempStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_RHStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_SatelliteStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_TCCStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_Rain24Styles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_RadarStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_500hPaHightStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_IR1Styles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_IR2Styles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_IR3Styles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_IR4Styles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_VISStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_FYVISStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_10uvStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_AirStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_WStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_CalamityStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_MCRStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_CLCStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_CheckTem.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_CheckTS.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_CheckDevia.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_GDYB_PPH.js"></script>
        <script type="text/javascript" src="js/CommonFunction.js"></script>
        <script type="text/javascript" src="js/Renderer/Plot.js"></script>
        <script type="text/javascript" src="js/Renderer/StreamLine.js"></script>
        <script type="text/javascript" src="js/Renderer/NeonLine.js"></script>
        <script type="text/javascript" src="js/Renderer/Contour.js"></script>
        <script type="text/javascript" src="js/Renderer/GlintAnimator.js"></script>
        <script type="text/javascript" src="js/Controls/datetimepicker.min.js"></script>
        <script type="text/javascript" src="js/Controls/Chart.js"></script>
        <script type="text/javascript" src="js/Controls/ChartClass.js"></script>
        <script type="text/javascript" src="js/Controls/DateSelecter.js"></script>
        <script type="text/javascript" src="js/Controls/YuBaoshixiaoTools.js"></script>
        <script type="text/javascript" src="js/Controls/SideWrapper.js"></script>
        <script type="text/javascript" src="js/Controls/MapSwitch.js"></script>
        <script type="text/javascript" src="js/Controls/dMapTools.js"></script>
        <script type="text/javascript" src="js/Controls/Legend.js"></script>
        <script type="text/javascript" src="js/Controls/MessageControl.js"></script>
        <script type="text/javascript" src="js/Controls/html2canvas.js"></script>
        <script type="text/javascript" src="js/CorrectAction.js"></script>
        <script type="text/javascript" src="js/MagicTool.js"></script>
        <script type="text/javascript" src="js/FilterTool.js"></script>
        <script type="text/javascript" src="js/CrossRelation.js"></script>
        <script type="text/javascript" src="js/CrossCorrection.js"></script>
        <script type="text/javascript" src="js/Pages/PageBase.js"></script>
        <script type="text/javascript" src="js/Pages/SKZLPageClass.js"></script>
        <script type="text/javascript" src="js/Pages/WXLDPageClass.js"></script>
        <script type="text/javascript" src="js/Pages/SZMSPageClass.js"></script>
        <script type="text/javascript" src="js/Pages/GDYBPageClass.js"></script>
        <script type="text/javascript" src="js/Pages/ZDYBPageClass.js"></script>
        <script type="text/javascript" src="js/Pages/XTGLPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/ZDYBSZPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/ZDGLPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/GDZSPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/QDLSKPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/QDLLDPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/QDLYTPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/ZHJCSKPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/ZHJCLDPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/ZHJCYTPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/QDLRHJCPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/QDLGNMXPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/QDLLJYBPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/QDLQSYBPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/DisplayPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/GDJYPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/QDLQXFXPageClass.js" ></script>
        <script type="text/javascript" src="js/util/clazz.js" ></script>
        <script type="text/javascript" src="js/util/helper.js" ></script>
        <script type="text/javascript" src="js/AlertSignalProduce.js" ></script>
        <script type="text/javascript" src="js/Pages/YJXHPageClass.js" ></script>
        <script type="text/javascript" src="js/Controls/Chat.js"></script>
        <script type="text/javascript" src="js/GridProductClass.js"></script>
        <script type="text/javascript" src="js/DataClass/RadarDataClass.js"></script>
        <script type="text/javascript" src="js/DataClass/AWXDataClass.js"></script>
        <script type="text/javascript" src="js/DataClass/MicapsDataClass.js"></script>
        <script type="text/javascript" src="js/DataClass/TextDataClass.js"></script>
        <script type="text/javascript" src="js/DataClass/GridCheckDataClass.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
		<script type="text/javascript" src="js/Layers/LocalTiledCacheLayer.js"></script>
        <script type="text/javascript" src="js/Layers/LocalTiledCacheLayerBlackMap.js"></script>
        <script type="text/javascript" src="js/Layers/LocalTiledCacheLayerWhiteMap.js"></script>
        <script type="text/javascript" src="js/Layers/LocalTiledCacheLayerTDTIMG.js"></script>
        <script type="text/javascript" src="js/Layers/LocalTiledCacheLayerTDTMAP.js"></script>
        <script type="text/javascript" src="js/Layers/LocalTiledCacheLayerTDTTER.js"></script>
        <script type="text/javascript" src="js/Layers/TianDiTuLayer.js"></script>
        <script type="text/javascript" src="js/FeatureUtilityClass.js"></script>
        <script type="text/javascript" src="js/Layers/FillColorLayer.js"></script>
        <script type="text/javascript" src="js/Layers/FillRangeColorLayer.js"></script>
        <script type="text/javascript" src="js/Layers/MappingLayer.js"></script>
        <script type="text/javascript" src="js/DataCache.js"></script>
        <script type="text/javascript" src="js/DataStack.js"></script>
        <script type="text/javascript" src="js/GridAnalyst.js"></script>
        <script type="text/javascript" src="js/Rect.js"></script>
        <script type="text/javascript" src="js/Panels/DragPanelBase.js"></script>
        <script type="text/javascript" src="js/Panels/Panel_Tools.js"></script>
        <script type="text/javascript" src="js/Panels/Panel_LQDZ.js"></script>
        <script type="text/javascript" src="js/Panels/Panel_QHDZ.js"></script>
        <script type="text/javascript" src="js/Panels/Panel_QSDZ.js"></script>
        <script type="text/javascript" src="js/Panels/Panel_FXDZ.js"></script>
        <script type="text/javascript" src="js/Panels/Panel_YSTJ.js"></script>
        <script src="data/StreamLine.js"></script>
        <script src="data/StreamLine_uv.js"></script>
        <script src="data/winddata.js"></script>
        <!-- mmgrid-->
        <link rel="stylesheet" href="css/mmgrid/mmGrid-bootstrap.css" />
        <link rel="stylesheet" href="css/mmgrid/mmGrid.css" />
        <link rel="stylesheet" href="css/mmgrid/mmPaginator.css" />
        <script type="text/javascript" src="js/mmGrid.js" ></script>
        <!-- mmgrid end -->
        <!-- artdialog -->
        <link rel="stylesheet" href="css/artdialog/ui-dialog.css" />
        <script type="text/javascript" src="css/artdialog/dialog-min.js" ></script>
        <!-- artdialog end-->
        <script type="text/javascript" src="js/jquery.form.js" ></script>
        <script type="text/javascript" src="js/latticeForcast.js"></script>
        <script type="text/javascript" src="js/util/AlertAreas.js"></script>
        <script type="text/javascript" src="js/util/DataFilter.js"></script>
    </head>
    <body>
        <!--<div id="MapToolsDiv" style="display: none;position: absolute;z-index: 25">
            <div id="mtsContentTL" class="mtsContentImg" style="width: 100%;height :28px;display: none;"><img src="imgs/tools/finger_TL.png" style="margin-left: 50px"/></div>
            <div id="mtsContentTR" class="mtsContentImg" style="width: 100%;height :28px;display: none;"><img src="imgs/tools/finger_TR.png" style="float:right;"/></div>
            <div id="mtsContent" style="height:20px;font-size: 14px;line-height: 20px;"></div>
            <div id="mtsContentBL" class="mtsContentImg" style="width: 100%;height :30px;margin-top: -1px;"><img src="imgs/tools/finger_BL.png" style="margin-left: 50px"/></div>
            <div id="mtsContentBR" class="mtsContentImg" style="width: 100%;height :30px;margin-top: -1px;display: none;"><img src="imgs/tools/finger_BR.png" style="float:right;"/></div>
        </div>-->

        <div class="body">
            <div class="banner">
                <div class="logo">
                    <img style="margin-top: -4px;" src="imgs/logo1.png" height="100%"><span style="font-size: 27px;letter-spacing: 5px;display: inline-block;font-family:微软雅黑;margin-left: 20px;float: right;margin-top: 3px;font-weight: bold;">甘肃省模式数据检验评估系统</span>
                </div>
                <!--右键菜单-->
                <div id="divContextMenu" style="display:none;width:80px;position:absolute;top:0px;left:0px;border: solid 1px rgb(150,160,200);background-color: #FFFFFF;color: #000000;z-index: 99;cursor: pointer;font-size: 12px;">
                    <div id="div_copy">复制</div>
                    <div id="div_paste" style="display: none">粘贴</div>
                    <div id="div_cancel">取消</div>
                </div>
                <!--登录按钮-->
                <div id="login" class="loginInfo">
                    <div id="user_img" style="padding-right: 2px;">
                    </div>
                    <span id="span_user" style="display: none;"></span><a id="a_exit" style="float: left;">登录</a>
                    <div id="user_hid">
                        <ul>
                            <li id="a_signout"><a title="退出">注销登录</a></li>
                            <li><a href="./docs/GDYB_UserManual.pdf" target="_blank" title="用户手册">用户手册</a></li>
                        </ul>
                    </div>
                </div>
                <!--4分屏按钮-->
                <a id="Screen4Btn" style="display: none;"><img src="imgs/img_screen4.png"/></a>
                <a id="ScreenFull" style="display: none;"><img src="imgs/img_launchfullscreen.png"/></a>
                <!--导航按钮-->
                <div class="navigation" style="display: none">
                    <div id="sjll_btn"><button class="active" ></button></div>
                    <div id="qdl_btn" style="display: none;"><button ></button><div id="messageNum_qdl" class="messageNum" style="margin: -68px 0px 0px 68px;width: 18px;height:18px;">5</div></div>
                    <div id="gdyb_btn"><button ></button></div>
                    <div id="cpzs_btn"><button ></button></div>
                    <div id="xtgl_btn"><button ></button></div>
                    <!--<button id="sjll_btn" class="active">综合监测</button>-->
                    <!--<button id="qdl_btn">强对流</button>
                    <button id="gdyb_btn">格点预报</button>
                    <button id="cpzs_btn">产品展示</button>
                    <button id="xtgl_btn">系统管理</button>-->
                </div>
            </div>

            <div class="content">

                <div id="sideWrapper" style="display: none">

                    <div class="nav__bg-slider" id="nav_bg_slider" style="display: block; top: 0px;">
                    </div>
                    <ul class="navlist" id="nav_menu">
                        <!--<li id="menu_skzl">
                            <a data-index="1">
                                <img src="imgs/img_element.png">
                                <span>实况资料</span>
                            </a></li>
                        <li id="menu_wxld">
                            <a data-index="2">
                                <img src="imgs/img_display.png">
                                <span>卫星雷达</span>
                            </a></li>-->
                        <li id="menu_szms" class="active">
                            <a data-index="3">
                                <span>数值模式</span>
                            </a></li>
                        <li id='menu_tqsk'>
                            <a data-index='3'>
                                <span>天气实况</span>
                            </a></li>
                        <li id='menu_ld'>
                            <a data-index='3'>
                                <span>雷达</span>
                            </a></li>
                        <li id='menu_yt'>
                            <a data-index='3'>
                                <span>云图</span>
                            </a></li>
                        <li id="menu_weather" class="weather-box" title="">
                            <a data-index="4" class="weather-item" title="多云">
                                <img alt="天气" src="http://s1.bdstatic.com/r/www/aladdin/img/new_weath/bigicon/5.png">
                                <span class="wtext">24~16℃</span>
                                <span class="aqi-text">多云</span>
                            </a></li>
                    </ul>
                </div>
                <div id="menu" class="menu_normal" onmousedown="dragPanel(this,event)"><!--minimize-->
                    <a id="displayBtn" class="displayBtn" flag="show"></a><!--&gt;-->
                    <div></div>
                    <div id="menu_bd"></div>
                    <div id="menu_changeDiv" class='menu_changeDiv'></div>
                </div>
                <div id="menu_timePanel" class="menu_timePanel menu_normal" style="display: none;" onmousedown="dragPanel(this,event)"></div>
                <div id="menu_showType" class="menu_showType menu_minimize" style="right: 0px;display: none;" onmousedown="dragPanel(this,event)">
                    <a id="displayShowType" class="displayBtn" style="height: 60px;bottom: 0px;border-radius: 5px 0px 0px 5px;" flag="hide;"></a>
                    <div id="menu_showType_bd" style="display: none;"></div>
                </div>
                <div id="messageDivs" class="messageDiv">
                    <div class="messageTitle" onmousedown="dragPanel(document.getElementById('messageDivs'),event)">
                        <div>临近预报</div>
                        <label id="chatClose1" title="关闭">x</label>
                        <span></span>
                    </div>
                    <div id="divMessage" class="divMessage"></div>
                    <div class="messageUL">
                        <div id="divReadW" style="margin-top: 5px;"></div>
                        <div id="divUnreadW" style="color: rgb(150,150,150);margin-top: 10px;"></div>
                    </div>
                    <div style="float: left;width: 498px;">
                        <textarea id="chatText" class="messageText"></textarea>
                        <button id="chatSend" >发送</button><button id="chatClose">关闭</button>
                    </div>
                </div>

                <div id="panelToolsContainer" class="panelToolsContainer">
                    <div class="panelToolsNew"></div>
                </div>
                <div id="latticeControl" class="latticeControl" title="隐藏">></div>
                <div id="latticeForcast" class="latticeForcast"></div>
                <div id="latticeTableControl" class="latticeTableControl" title="隐藏" >隐藏</div>
                <div id="latticePrecipitation" class="latticePrecipitation"></div>
                <!--浮动信息框-->
                <div id="myInfoWindow" style="z-index: 99;display: none;position: absolute;">
                    <div id="myInfoTL" class="myInfoImg" style="width: 100%;height :28px;display: none;"><img src="imgs/zhjc/finger_TL.png" style="margin-left: 50px"/></div>
                    <div id="myInfoTR" class="myInfoImg" style="width: 100%;height :28px;display: none;"><img src="imgs/zhjc/finger_TR.png" style="float:right;"/></div>
                    <div id="myInfoWin" style="background-color: #ffffff;box-shadow:5px 5px 8px #888888;border: 1px solid rgb(183,183,183);margin-top: -1px;"></div>
                    <div id="myInfoBL" class="myInfoImg" style="width: 100%;height :30px;margin-top: -1px;"><img src="imgs/zhjc/finger_BL.png" style="margin-left: 50px"/></div>
                    <div id="myInfoBR" class="myInfoImg" style="width: 100%;height :30px;margin-top: -1px;display: none;"><img src="imgs/zhjc/finger_BR.png" style="float:right;"/></div>
                </div>
                <div id="workspace_div">
                    <div id="mapTool_div" class="mapTool" style="display:none;border-left: 1px solid #DFDFDF;border-right: 1px solid #DFDFDF;">
                        <div id="divTool" style="height: 30px">
                            <div id='dateSelect' style='margin-left: 0px;float:left'></div>
                            <select id='selectMakeTime' style='float:left;background-color:rgba(225, 225, 235, 0);width:65px;height:26px;margin:0px 0px 0px 5px;font-size: 13px;font-weight: bold'><option value='5'>05时</option><option value='10'>10时</option><option value='16'>16时</option></select>
                            <select id='selectProductType' style='float:left;background-color:rgba(225, 225, 235, 0);width:90px;height:26px;margin:0px 0px 0px 5px;font-size: 13px;font-weight: bold'><option value='cty_p'>市台订正</option><option value='prvn_p'>省台指导</option><option value='prvn_r'>值班预报</option></select>
                            <select id='selectElement' style='float:left;background-color:rgba(225, 225, 235, 0);width:120px;height:26px;margin:0px 0px 0px 5px;font-size: 13px;font-weight: bold'><option value='r12'>日降水量</option><option value='tmax'>日最高温</option><option value='tmin'>日最低温</option><option value='wmax'>日最大风</option><option value='w'>天气</option><option value='air'>空气污染等级</option><option value='r3'>降水量</option><option value='2t'>气温</option><option value='10uv'>风</option><option value='rh'>相对湿度</option><option value='tcc'>云量</option><option value='vis'>能见度</option></select>
                        </div>
                        <div id="divHourSpan" style="width: 100%;">
                        </div>
                    </div>

                    <div id="map_div" class="map_normal" style="display: none">
                        <div id="MapToolsDiv" hflag="false" style="display: none;position: absolute;z-index: 99">
                            <div id="mtsContentTL" class="mtsContentImg" style="width: 100%;height :28px;display: none;"><img src="imgs/tools/finger_TL.png" style="margin-left: 50px"/></div>
                            <div id="mtsContentTR" class="mtsContentImg" style="width: 100%;height :28px;display: none;"><img src="imgs/tools/finger_TR.png" style="float:right;"/></div>
                            <div id="mtsContent"  style="height:20px;font-size: 14px;line-height: 20px;"></div>
                            <div id="mtsContentBL" class="mtsContentImg" style="width: 100%;height :30px;margin-top: -1px;"><img src="imgs/tools/finger_BL.png" style="margin-left: 50px"/></div>
                            <div id="mtsContentBR" class="mtsContentImg" style="width: 100%;height :30px;margin-top: -1px;display: none;"><img src="imgs/tools/finger_BR.png" style="float:right;"/></div>
                        </div>
                        <div id="dxWindows"></div>
                        <div id="map_title_div" style="position: absolute;left:50%;top:0%;width: 325px;margin-left:-140px;text-align:center;/*background-color:rgba(255,255,255,0.8);border:1px solid rgb(52,115,183);*/font-size:16px;z-index: 5;display: none;"></div>
                        <div id="map_QDLtitle_div" style="position: absolute;left:1%;top:5%;width: 900px;text-align:left;font-size:28px;z-index: 5;/*background-color:rgba(244,244,244,0.5);border:1px solid rgb(52,115,183);*/display: none;"></div>
                        <div id="map_alert_div" style="position: absolute;display: none;left:50%;top:50%;width: 300px;margin-left:-140px;text-align:center;font-size:24px;color:rgb(255,0,0);z-index: 5;">无数据</div>
                        <div id="popup_div" style="position: absolute;width:100%;height:100%;top:10px;left:0px;z-index: 5;display: none;text-align: center;padding-top: 30px;">
                        <span style="display: inline-block;border: 1px solid #4c4c4c;background: #fff;padding: 20px;">
                        <div><span>格点值:</span>&nbsp;&nbsp;<input id="popup_text" type="text" style="height: 30px;width: 100px;"/>&nbsp;&nbsp;<input id="popup_submit" type="button" value="确定" onclick="popup_submit_fun()">&nbsp;&nbsp;<input id="popup_cancel" type="button" value="取消" onclick="popup_cancel_fun()"/></div>
                        </span>
                        </div>
                        <div id="divInputValue" style="display: none; position: absolute;width: 35px; height: 24px;top:0px;left:0px;border: solid 1px rgb(150,160,200);background-color: #FFFFFF;color: #000000;z-index: 99;font-size: 12px">
                            <input id="divInputValue_input" type="text" style="height: 100%;width: 100%;border: none;text-align: center"/>
                        </div>
                        <canvas class="process" width="200px" height="200px" style="display:none;"></canvas>
                        <div id="div_legend" style="position: absolute;display: block;bottom: 1px;width: 100%;float: left;;z-index: 5;text-align: center;">
                            <div style="float: left;display: inline-block;">
                                <div id="div_legend_items3" class="div_legend_items" style="height: 30px;display: none;"></div>
                                <div id="div_legend_items1" class="div_legend_items" style="height: 30px;display: none;"></div>
                                <div id="div_legend_items" class="div_legend_items" style="height: 26px;display: none;    border: 1px solid #ddd;"></div>
                                <div id="div_legend_items2" class="div_legend_items" style="height: 60px;display: none;"></div>
                                <!--<div id="div_legend_itemTexts" style="height: 30px;"></div>-->
                            </div>
                        </div>
                        <div id="mapSwitch_div" class="mapLayer" style="z-index:20;">
                            <div style="float:right;display: none;">
                                <div>
                                    <img id="curImg" class="mapNowImg" flag="vec" src="imgs/img_map_loc_day.png">
                                </div>
                            </div>
                            <div id="div_tdt_ter" onclick="tiandituOnclick(this)" class="moreMapLayer" style="float: right; margin-right: 5px; display: none;">
                                <div>
                                    <div>
                                        <img class="mapImg" flag="ter" src="imgs/img_map_tdt_ter.png">
                                    </div>
                                </div>
                            </div>
                            <div id="div_tdt_map" onclick="tiandituOnclick(this)" class="moreMapLayer" style="float: right; margin-right: 5px; display: none;">
                                <div>
                                    <div>
                                        <img class="mapImg" flag="vec" src="imgs/img_map_tdt_map.png">
                                    </div>
                                </div>
                            </div>
                            <div id="div_loc_day" onclick="tiandituOnclick(this)" class="moreMapLayer" style="float: right; margin-right: 5px; display: none;">
                                <div>
                                    <div>
                                        <img class="mapImg" flag="day" src="imgs/img_map_loc_day.png">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="dmapTools" class="dmapTools" style="z-index:20;">
                            <div  flag="zoomIn" title="地图放大">
                                <img src="imgs/tools/tbig.png" class="toolsImg"/>
                                <span class="toolsTitile">放大</span>
                            </div>
                            <div  flag="zoomOut" title="地图缩小">
                                <img src="imgs/tools/tsmall.png" class="toolsImg"/>
                                <span class="toolsTitile">缩小</span>
                            </div>
                            <div flag="pan" title="移动地图">
                                <img src="imgs/tools/trace.png" class="toolsImg"/>
                                <span class="toolsTitile">平移</span>
                            </div>
                            <div flag="fullScreen" title="缩放本区域全图">
                                <img src="imgs/tools/fscreen.png" class="toolsImg"/>
                                <span class="toolsTitile">全图</span>
                            </div>
                            <div flag="drawLine" title="测距离">
                                <img src="imgs/tools/gdistance.png" class="toolsImg"/>
                                <span class="toolsTitile">测距</span>
                            </div>
                            <div flag="drawPolygon" title="测面积">
                                <img src="imgs/tools/garea.png" class="toolsImg"/>
                                <span class="toolsTitile">测面</span>
                            </div>
                            <div flag="clear" title="清除">
                                <img src="imgs/tools/clear.png" class="toolsImg"/>
                                <span class="toolsTitile">清除</span>
                            </div>
                            <div flag="outImg" title="截图">
                                <span class="toolsTitile">截图</span>
                            </div>
                            <div flag="layer" title="图层">
                                <span class="toolsTitile">图层</span>
                            </div>
                        </div>

                        <div class="mapd" style="left: 0px;top:0px;display: none;"><div id="map1_title_div" style="position:absolute;z-index:10;left:30%;top:5px;text-align:center;background:#fff;border:1px solid #b6bfc6;pading:5px;font-size:20px"></div></div>
                        <div class="mapd" style="left: 50%;top:0px;display: none;"><div id="map2_title_div" style="position:absolute;z-index:10;left:30%;top:5px;text-align:center;background:#fff;border:1px solid #b6bfc6;pading:5px;font-size:20px"></div></div>
                        <div class="mapd" style="left: 0px;top:50%;display: none;"><div id="map3_title_div" style="position:absolute;z-index:10;left:30%;top:5px;text-align:center;background:#fff;border:1px solid #b6bfc6;pading:5px;font-size:20px"></div></div>
                        <div class="mapd" style="left: 50%;top:50%;display: none;"><div id="map4_title_div" style="position:absolute;z-index:10;left:30%;top:5px;text-align:center;background:#fff;border:1px solid #b6bfc6;pading:5px;font-size:20px"></div></div>

                        <div id="map">

                        </div>
                        <div class="mapd" style="left: 0px;top:0px;display: none;"><div class="screen4Map" id="map1"></div></div>
                        <div class="mapd" style="left: 50%;top:0px;display: none;"><div class="screen4Map" id="map2"></div></div>
                        <div class="mapd" style="left: 0px;top:50%;display: none;"><div class="screen4Map" id="map3"></div></div>
                        <div class="mapd" style="left: 50%;top:50%;display: none;"><div class="screen4Map" id="map4"></div></div>
                        <div id="chart_div" style="position:absolute;z-index:10;bottom:10px;left:10px;background:#fff;border:1px solid #b6bfc6;pading:5px;"></div>
                        <div id="div_showGridValue" style="display:none; position: absolute; border: 1px solid #4c4c4c;background-color:rgba(255,255,255,0.5);padding:3px 3px 3px 3px;"></div>
                    </div>
                    <!--<div id="hourSpan_div" style="position: absolute;width: 100%;height: 30px;background: #ededed;left: 300px;bottom: 0px">-->
                    <!--</div>-->
                    <div id="div_modal_confirm" class="modal fade in" style="display: none; ">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <a class="close" data-dismiss="modal">×</a>
                                    <h3>提示</h3>
                                </div>
                                <div id="divImportModelType" class="modal-body">
                                    <h4 id="div_modal_confirm_content">是否交叉订正</h4>
                                </div>
                                <div class="modal-footer">
                                    <a id="btn_canel" href="#" class="btn" data-dismiss="modal">取消</a>
                                    <a id="btn_ok" href="#" data-dismiss="modal" class="btn btn-success">确定</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="alarm_modal_confirm" class="modal fade in" style="display: none;">
                        <div class="modal-dialog" style="position: absolute;left: 5%;bottom: 1%;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <!--<a class="close" data-dismiss="modal"><i class="fa fa-close"></i></a>-->
                                    <h4><i class="fa fa-bell-o"></i>　灾害报警</h4>
                                </div>
                                <div class="modal-body" style="max-height: 300px; overflow-y: scroll;">
                                    <h5>test</h5>
                                </div>
                                <div class="modal-footer">
                                    <a href="#" data-dismiss="modal" class="btn btn-success" id="alarm_modal_btn_submit">我已知晓</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="pdf_modal_confirm" class="modal fade in" style="display: none;width: 80%;height: 80%;left: 10%;margin: 0px;top: 10%;max-height: 1080px;">
                        <div class="modal-dialog" style="width: 100%; height: 100%;">
                            <div class="modal-content" style="width: 100%; height: 100%;">
                                <div class="modal-header">
                                    <a class="close" data-dismiss="modal">×</a>
                                    <h3>文档</h3>
                                </div>
                                <div class="modal-body" style="width: 97%;height: 88%;">
                                    <h4 id="pdf_modal_confirm_content"></h4>
                                </div>
                                <!--<div class="modal-footer">-->
                                </div>
                        </div>
                    </div>
                    </div>
                    <div id="div_modal" class="modal fade in" style="display: none; ">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <a class="close" data-dismiss="modal">×</a>
                                    <h3>提示</h3>
                                </div>
                                <div id="divImportModelType" class="modal-body">
                                    <!--<h4>是否全部要素按此模式调入</h4>-->
                                    <!--<p>“是”-全部要素，“否”-仅当前要素，“取消”-取消当前操作。</p>-->
                                    <h4 id="div_modal_content">是否调入模式数据（模式时间）</h4>
                                    <div style="margin-top: 10px;"><input id="inputCurrentElementCurrentHourspan" name="importtype" type="radio" value="1" checked="checked" /><span>该要素当前时效</span></div>
                                    <div style="margin-top: 10px;"><input id="inputCurrentElementAllHourspan" name="importtype" type="radio" value="2"/><span>该要素所有时效</span></div>
                                    <div style="margin-top: 10px;"><input id="inputAllElementAllHourspan" name="importtype" type="radio" value="3"/><span>全部要素所有时效</span></div>
                                </div>
                                <div class="modal-footer">
                                    <a id="btn_canel" href="#" class="btn" data-dismiss="modal">取消</a>
                                    <a id="btn_ok" href="#" data-dismiss="modal" class="btn btn-success">确定</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="div_modal_SaveGrid" class="modal fade in" style="display: none; ">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <a class="close" data-dismiss="modal">×</a>
                                    <h3>提示</h3>
                                </div>
                                <div id="div_modal_SaveGrid_Body" class="modal-body">
                                    <h4 id="div_modal_SaveGrid_content">是否提交格点产品？</h4>
                                    <div style="margin-top: 10px;"><input id="saveCurrentElementCurrentHourspan" name="importtype" type="radio" value="1" checked="checked" /><span>该要素当前时效</span></div>
                                    <div style="margin-top: 10px;"><input id="saveCurrentElementAllHourspan" name="importtype" type="radio" value="2"/><span id="span_SaveTheElementAllHourSpan">该要素所有时效</span></div>
                                    <div style="margin-top: 10px;"><input id="saveCurrentAllElementAllHourspan" name="importtype" type="radio" value="2"/><span id="span_SaveAllElementAllHourSpan">全部要素所有时效</span></div>
                                </div>
                                <div class="modal-footer">
                                    <a id="btn_canel" href="#" class="btn" data-dismiss="modal">取消</a>
                                    <a id="btn_ok" href="#" data-dismiss="modal" class="btn btn-success">确定</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="div_progress" style="opacity:0.9;position: absolute;top: 50%;left: 50%;margin: -120px 0px 0px -120px;z-index: 99;display: none;text-align: center;">
                        <link rel="stylesheet" href="css/load6.css">
                        <div class="load-container load6">
                            <span id="div_progress_title" style="color: #ffff00;font-size: 16px;font-weight: bold;text-shadow:rgb(0,0,0) 1px 0 0,rgb(0,0,0) 0 1px 0,rgb(0,0,0) -1px 0 0,rgb(0,0,0) 0 -1px 0;">正在生成格点报...</span>
                            <div class="loader">Loading...::after</div>
                        </div>
                    </div>
                    <div id="div_alert" class="modal fade in" style="display: none; ">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <a class="close" data-dismiss="modal">×</a>
                                    <h3>提示</h3>
                                </div>
                                <div class="modal-body">
                                    <h4 id="div_alert_content"></h4>
                                </div>
                                <div class="modal-footer">
                                    <a id="alert_ok" href="#" data-dismiss="modal" class="btn btn-success">确定</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <audio id="alertAudio"><source src="audio\8.wav" type="audio/wav"></audio>
    </body>
    <script type="text/javascript">
        var host = "http://127.0.0.1";
        var imgCacheUrl = "http://127.0.0.1:8080/cache";
        var imgCachePath = "D:/Tomcats/apache-tomcat-7.0.69-gdyb/webapps/cache/";
        var dataSericeUrl = host+":8081/WMDataService/";
        var gridServiceUrl = host+":8080/WMGridService/";
        var userServiceUrl = host+":8080/WMUser/";
        var gsDataService = host+":8081/GSDataService/";
		var gsDataService_8083 = host + ":8083/GSDataService/";
        var archiveService = host+":8080/SPDArchiveService/";
        var nTickCount = 0;

        //鼠标滑过地图切换DIV
        $(".mapLayer").hover(function(){
            var $this = $(this).find(".moreMapLayer");
            $this.css("display","block");
        },function(){
            var $this = $(this).find(".moreMapLayer");
            $this.css("display","none");
        });

        $(document).ready(function(){
            window.GDYB&&GDYB.Page.main();
        });

        //键盘按键事件
        $(document).keydown(function (event) {
            if(event.keyCode == 189 || event.keyCode == 83) //-、s
            {
                GDYB.GridProductClass.updateGrid(GDYB.GridProductClass.subValue, 1);
                GDYB.FilterTool.updateGrid(GDYB.GridProductClass.subValue, 1);
            }
            else if(event.keyCode == 187 || event.keyCode == 65) //+、a
            {
                GDYB.GridProductClass.updateGrid(GDYB.GridProductClass.addValue, 1);
                GDYB.FilterTool.updateGrid(GDYB.GridProductClass.addValue, 1);
            }
        });

        //弹出输入框
        function popup_submit_fun(){
            var t = this;
            var value = $("#popup_text").val();
            if(value&&value!=""){
                $("#popup_div").css("display","none");
                GDYB.GridProductClass.currentGridValuePicked = Math.floor(value*10)/10;
            }
            else{
                alertModal("请输入格点值");
            }
        }

        function popup_cancel_fun(){
            $("#popup_div").css("display","none");
            GDYB.GridProductClass.currentGridValuePicked = null;
        }

        //右键菜单事件处理
        var hourspanCopy = null;
        var hourspanHover = null;
        $("#divContextMenu").find("div").click(function(){
            if(this.id == "div_copy"){
                hourspanCopy = hourspanHover;
                $("#div_paste").css("display", "block");
                $("#divContextMenu").css("display", "none");
            }
            else if(this.id == "div_paste"){
                $("#divContextMenu").css("display", "none");
                //var template = "是否将{0}小时格点粘贴到{1}小时格点？";
                //if(confirm(template.format(hourspanCopy, hourspanHover)) == true)
                {
                    GDYB.GridProductClass.dataCache.getData(GDYB.GridProductClass.currentMakeTime, GDYB.GridProductClass.currentVersion,
                            GDYB.GridProductClass.currentDateTime, GDYB.GridProductClass.currentElement, hourspanCopy,function(hourspanData){
                                //这里必须拷贝
                                var dataStack = new DataStack();
                                var datasetGrid = dataStack.clone(hourspanData.data);

                                GDYB.GridProductClass.dataCache.addData(GDYB.GridProductClass.currentMakeTime, GDYB.GridProductClass.currentVersion,
                                        GDYB.GridProductClass.currentDateTime, GDYB.GridProductClass.currentElement, hourspanHover, datasetGrid, 1,function(){
                                            GDYB.GDYBPage.updateHourSpanStatus();
                                        });
                            });
                }
            }
            else if(this.id == "div_cancel"){
                $("#divContextMenu").css("display", "none");
            }
        });

        $("#login").find("a").click(function(){
            if(this.id == "a_exit"){
                window.location.href="index.html";
            }
            else{
                $("#span_user")[0].innerHTML = "";
                $.cookie('password', '', { expires: -1 });      //如果退出，不记录密码
                $.cookie("rmbUser", 'false', { expire: -1 });   //如果退出，不记录密码
                $("#a_exit").css("display","block");
                $("#a_signout").css("display","none");
                $("#span_user").css("display","none");
            }
            /*if(this.innerHTML != "登录") {
                GDYB.GridProductClass.currentUserName = null;

                $("#span_user")[0].innerHTML = "未登录";
                $.cookie('password', '', { expires: -1 });      //如果退出，不记录密码
                $.cookie("rmbUser", 'false', { expire: -1 });   //如果退出，不记录密码
                this.innerHTML = "登录";
            }
            else if(this.innerHTML == "登录") {
                window.location.href="index.html";
            }*/
        });

        $("#user_img").click(function(){
            if($("#user_hid").is(":hidden")){
                $("#user_hid").slideDown();
            }
            else{
                $("#user_hid").css("display","none");
            }
        });

        //显隐displayBtn
        $("#menu_bd").hover(function(){
            //$("#displayBtn").css("display", "block");
        });
        $("#menu_bd").mouseleave(function(){
            //setTimeout("$('#displayBtn').css('display', 'none')",5000);
        });
        $("#sideWrapper").hover(function(){
            //$("#displayBtn").css("display", "block");
        });
        $("#sideWrapper").mouseleave(function(){
            //setTimeout("$('#displayBtn').css('display', 'none')",5000);
        });

        document.getElementById('chatText').addEventListener('keyup',function(e){
            if(e.keyCode!=17) return;
            GDYB.Chat.ctrlFlag = false;
        });

        $("#chatText").keydown(function(event){
            if (event.keyCode == 13) {
                if(GDYB.Chat.ctrlFlag){
                    this.value += "\n";
                    return;
                }
                event.preventDefault();
                var message = "";
                var productId = GDYB.Chat.productId;
                var productName = GDYB.Chat.productName;
                var updateTime = GDYB.Chat.getNowTimes();
                var content = $(this).val();
                var departName = GDYB.GridProductClass.currentUserDepart.departName;
                var departCode = GDYB.GridProductClass.currentUserDepart.departCode;
                var userName = GDYB.GridProductClass.currentUserName;
                var showName = "null";
                message = '{"productId":"'+productId+'","productName":"'+productName+'","updateTime":"'+updateTime+'","content":"'+content+'","departName":"'+departName+'","departCode":"'+departCode+'","userName":"'+userName+'","showName":"'+showName+'"}';
                GDYB.Chat.sendMessage(message);
            }
            else if(event.keyCode==17) {
                GDYB.Chat.ctrlFlag = true;
            }
        });
        $("#chatSend").click(function(event){
            var message = "";
            var productId = GDYB.Chat.productId;
            var productName = GDYB.Chat.productName;
            var updateTime = GDYB.Chat.getNowTimes();
            var content = $("#chatText").val();
            var departName = GDYB.GridProductClass.currentUserDepart.departName;
            var departCode = GDYB.GridProductClass.currentUserDepart.departCode;
            var userName = GDYB.GridProductClass.currentUserName;
            var showName = "null";
            message = '{"productId":"'+productId+'","productName":"'+productName+'","updateTime":"'+updateTime+'","content":"'+content+'","departName":"'+departName+'","departCode":"'+departCode+'","userName":"'+userName+'","showName":"'+showName+'"}';
            GDYB.Chat.sendMessage(message);
        });
        $("#chatClose").click(function(){
            $("#messageDivs").css("display","none");
            $("#divMessage").html("");
        });
        $("#chatClose1").click(function(){
            $("#messageDivs").css("display","none");
            $("#divMessage").html("");
        });
        $(".logo").click(function(){
            window.location.href="http://172.23.2.237:8080/gdyb_test/nativ.html";
        });

    </script>
</html>